{% extends "templates/web.html" %}

{% block title %}Chat{% endblock %}

{% block page_content %}

<!-- Redirect to login if not logged in -->
{% if frappe.session.user == "Guest" %}
  <script>
    window.location.href = "/login?redirect-to=/chat";
  </script>
{% endif %}

<link rel="stylesheet" href="/assets/pcms/css/chat.css">

<div class="chat-container">

  <div id="patient-info">
    <span><strong>Name:</strong> {{ patient.patient_name }}</span>
    <span><strong>MR No:</strong> {{ patient.mr_no }}</span>
  </div>
  


  <div class="chat-header">Patient Chat</div>
  
  <div class="chat-body" id="chat-body">
    <!-- Messages will appear here -->
  </div>

  <div class="chat-input">
    <textarea id="message" placeholder="Type your message..."></textarea>
    <div class="chat-buttons">
      <button class="send-btn" id="send-btn">Send</button>
      <button id="open-quick-voice-modal" class="quick-voice-trigger-btn">ðŸŽ¤ Quick Voice</button>
      <button class="record-btn" id="record-btn">ðŸŽ¤ Record</button>
    </div>
  </div>
</div>

<!-- Voice Review Modal -->
<div class="voice-modal hidden" id="voice-modal">
  <div class="voice-modal-content">
    <h3>Voice Review</h3>
    <audio id="audio-review" controls></audio>
    <div class="voice-modal-buttons">
      <button id="play-voice">Play</button>
      <button id="discard-voice">Discard</button>
      <button id="send-voice">Send</button>
    </div>
  </div>
</div>



<!-- quick Voice Selection Modal -->
<div id="quick-voice-modal" class="quick-voice-modal hidden">
  <div class="quick-voice-modal-content">
    <h5 style="text-align: center;">Quick Voices</h5>
    <header>
      <input style=" border: 1.5px solid #15c449;" type="text" id="voice-search" placeholder="Search quick voicesâ€¦" />
    </header>
    <div class="quick-voice-list">
      <button data-voice="headache" class="quick-voice-item">Headache</button>
<button data-voice="stomach_ache" class="quick-voice-item">Stomach Ache</button>
<button data-voice="chest_pain" class="quick-voice-item">Chest Pain</button>
<button data-voice="back_pain" class="quick-voice-item">Back Pain</button>
<button data-voice="joint_pain" class="quick-voice-item">Joint Pain</button>
<button data-voice="muscle_pain" class="quick-voice-item">Muscle Pain</button>
<button data-voice="toothache" class="quick-voice-item">Toothache</button>
<button data-voice="earache" class="quick-voice-item">Earache</button>
<button data-voice="sore_throat" class="quick-voice-item">Sore Throat</button>
<button data-voice="sharp_pain_in_my_side" class="quick-voice-item">Sharp Pain In My Side</button>
<button data-voice="nausea" class="quick-voice-item">Nausea</button>
<button data-voice="vomiting" class="quick-voice-item">Vomiting</button>
<button data-voice="diarrhea" class="quick-voice-item">Diarrhea</button>
<button data-voice="constipation" class="quick-voice-item">Constipation</button>
<button data-voice="heartburn" class="quick-voice-item">Heartburn</button>
<button data-voice="bloating" class="quick-voice-item">Bloating</button>
<button data-voice="loss_of_appetite" class="quick-voice-item">Loss Of Appetite</button>
<button data-voice="blood_in_stool" class="quick-voice-item">Blood In Stool</button>
<button data-voice="black_stools" class="quick-voice-item">Black Stools</button>
<button data-voice="acid_reflux" class="quick-voice-item">Acid Reflux</button>
<button data-voice="cough" class="quick-voice-item">Cough</button>
<button data-voice="shortness_of_breath" class="quick-voice-item">Shortness Of Breath</button>
<button data-voice="wheezing" class="quick-voice-item">Wheezing</button>
<button data-voice="runny_nose" class="quick-voice-item">Runny Nose</button>
<button data-voice="sinus_pressure" class="quick-voice-item">Sinus Pressure</button>
<button data-voice="sneezing" class="quick-voice-item">Sneezing</button>
<button data-voice="chest_congestion" class="quick-voice-item">Chest Congestion</button>
<button data-voice="sore_lungs" class="quick-voice-item">Sore Lungs</button>
<button data-voice="post_nasal_drip" class="quick-voice-item">Post Nasal Drip</button>
<button data-voice="hoarse_voice" class="quick-voice-item">Hoarse Voice</button>
<button data-voice="dizziness" class="quick-voice-item">Dizziness</button>
<button data-voice="lightheadedness" class="quick-voice-item">Lightheadedness</button>
<button data-voice="numbness_in_hands" class="quick-voice-item">Numbness In Hands</button>
<button data-voice="tingling_in_feet" class="quick-voice-item">Tingling In Feet</button>
<button data-voice="blurred_vision" class="quick-voice-item">Blurred Vision</button>
<button data-voice="double_vision" class="quick-voice-item">Double Vision</button>
<button data-voice="ringing_in_ears" class="quick-voice-item">Ringing In Ears</button>
<button data-voice="memory_lapses" class="quick-voice-item">Memory Lapses</button>
<button data-voice="brain_fog" class="quick-voice-item">Brain Fog</button>
<button data-voice="migraine" class="quick-voice-item">Migraine</button>
<button data-voice="rash" class="quick-voice-item">Rash</button>
<button data-voice="itchy_skin" class="quick-voice-item">Itchy Skin</button>
<button data-voice="hives" class="quick-voice-item">Hives</button>
<button data-voice="dry_patches" class="quick-voice-item">Dry Patches</button>
<button data-voice="acne_breakout" class="quick-voice-item">Acne Breakout</button>
<button data-voice="swelling" class="quick-voice-item">Swelling</button>
<button data-voice="bruising_easily" class="quick-voice-item">Bruising Easily</button>
<button data-voice="cracked_lips" class="quick-voice-item">Cracked Lips</button>
<button data-voice="night_sweats" class="quick-voice-item">Night Sweats</button>
<button data-voice="hot_flashes" class="quick-voice-item">Hot Flashes</button>
<button data-voice="frequent_urination" class="quick-voice-item">Frequent Urination</button>
<button data-voice="burning_when_urinating" class="quick-voice-item">Burning When Urinating</button>
<button data-voice="blood_in_urine" class="quick-voice-item">Blood In Urine</button>
<button data-voice="lower_abdominal_pain" class="quick-voice-item">Lower Abdominal Pain</button>
<button data-voice="vaginal_itching" class="quick-voice-item">Vaginal Itching</button>
<button data-voice="irregular_periods" class="quick-voice-item">Irregular Periods</button>
<button data-voice="erectile_dysfunction" class="quick-voice-item">Erectile Dysfunction</button>
<button data-voice="testicular_pain" class="quick-voice-item">Testicular Pain</button>
<button data-voice="breast_lump" class="quick-voice-item">Breast Lump</button>
<button data-voice="pain_during_sex" class="quick-voice-item">Pain During Sex</button>
<button data-voice="anxiety" class="quick-voice-item">Anxiety</button>
<button data-voice="depression" class="quick-voice-item">Depression</button>
<button data-voice="panic_attacks" class="quick-voice-item">Panic Attacks</button>
<button data-voice="mood_swings" class="quick-voice-item">Mood Swings</button>
<button data-voice="insomnia" class="quick-voice-item">Insomnia</button>
<button data-voice="fatigue" class="quick-voice-item">Fatigue</button>
<button data-voice="lack_of_concentration" class="quick-voice-item">Lack Of Concentration</button>
<button data-voice="irritability" class="quick-voice-item">Irritability</button>
<button data-voice="suicidal_thoughts" class="quick-voice-item">Suicidal Thoughts</button>
<button data-voice="ptsd_flashbacks" class="quick-voice-item">PTSD Flashbacks</button>
<button data-voice="fever" class="quick-voice-item">Fever</button>
<button data-voice="chills" class="quick-voice-item">Chills</button>
<button data-voice="weakness" class="quick-voice-item">Weakness</button>
<button data-voice="swollen_lymph_nodes" class="quick-voice-item">Swollen Lymph Nodes</button>
<button data-voice="weight_loss" class="quick-voice-item">Weight Loss</button>
<button data-voice="weight_gain" class="quick-voice-item">Weight Gain</button>
<button data-voice="excessive_thirst" class="quick-voice-item">Excessive Thirst</button>
<button data-voice="dry_mouth" class="quick-voice-item">Dry Mouth</button>
<button data-voice="bad_breath" class="quick-voice-item">Bad Breath</button>
<button data-voice="metallic_taste" class="quick-voice-item">Metallic Taste</button>
<button data-voice="asthma_flare_up" class="quick-voice-item">Asthma Flare Up</button>
<button data-voice="diabetes_high_sugar" class="quick-voice-item">Diabetes High Sugar</button>
<button data-voice="low_blood_pressure" class="quick-voice-item">Low Blood Pressure</button>
<button data-voice="high_blood_pressure" class="quick-voice-item">High Blood Pressure</button>
<button data-voice="arthritis_pain" class="quick-voice-item">Arthritis Pain</button>
<button data-voice="gout_attack" class="quick-voice-item">Gout Attack</button>
<button data-voice="fibromyalgia_pain" class="quick-voice-item">Fibromyalgia Pain</button>
<button data-voice="ibs_cramps" class="quick-voice-item">IBS Cramps</button>
<button data-voice="crohns_flare_up" class="quick-voice-item">Crohn's Flare Up</button>
<button data-voice="lupus_fatigue" class="quick-voice-item">Lupus Fatigue</button>
<button data-voice="allergies_acting_up" class="quick-voice-item">Allergies Acting Up</button>
<button data-voice="motion_sickness" class="quick-voice-item">Motion Sickness</button>
<button data-voice="vertigo" class="quick-voice-item">Vertigo</button>
<button data-voice="jaw_clicking" class="quick-voice-item">Jaw Clicking</button>
<button data-voice="heel_spur_pain" class="quick-voice-item">Heel Spur Pain</button>
<button data-voice="sciatica_pain" class="quick-voice-item">Sciatica Pain</button>
<button data-voice="restless_legs" class="quick-voice-item">Restless Legs</button>
<button data-voice="cold_hands_and_feet" class="quick-voice-item">Cold Hands And Feet</button>
<button data-voice="hair_falling_out" class="quick-voice-item">Hair Falling Out</button>
<button data-voice="brittle_nails" class="quick-voice-item">Brittle Nails</button>
      <!-- Add more items -->
    </div>
    <button id="close-quick-voice-modal" class="quick-modal-close-btn">Cancel</button>
  </div>
</div>


<script>
  window.nursing_station = {{ patient.nursing_station | tojson | safe }};
</script>
<!-- Just include your own script. jQuery is already loaded via Frappe -->
<script src="/assets/pcms/js/chat.js"></script>


{% endblock %}
